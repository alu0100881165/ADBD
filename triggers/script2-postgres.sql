-- MySQL Script generated by MySQL Workbench
-- mie 13 nov 2019 19:01:08 WET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering


-- -----------------------------------------------------
-- Schema farmacia
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema farmacia
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table farmacia.Familia
-- -----------------------------------------------------
CREATE TABLE  Familia (
  Nombre text,
  Incompatibilidades text NULL,
  PRIMARY KEY (Nombre));


-- -----------------------------------------------------
-- Table farmacia.Enfermedad
-- -----------------------------------------------------
CREATE TABLE  Enfermedad (
  Nombre text,
  Sintegeroma text NULL,
  PRIMARY KEY (Nombre));


-- -----------------------------------------------------
-- Table farmacia.FamiliaEnfermedad
-- -----------------------------------------------------
CREATE TABLE  FamiliaEnfermedad (
  Nombre_fam text REFERENCES Familia(Nombre) ON DELETE RESTRICT ON UPDATE CASCADE,
  Nombre_enf text REFERENCES Enfermedad(Nombre) ON DELETE RESTRICT ON UPDATE CASCADE,
  PRIMARY KEY (Nombre_fam, Nombre_enf));


-- -----------------------------------------------------
-- Table farmacia.Laboratio
-- -----------------------------------------------------
CREATE TABLE  Laboratorio (
  Codigo integer,
  Nombre text NULL,
  Contacto text NULL,
  Telefono integer NULL,
  Calle text NULL,
  NumCalle integer NULL,
  CP integer NULL,
  PRIMARY KEY (Codigo));


-- -----------------------------------------------------
-- Table farmacia.Medicamento
-- -----------------------------------------------------
CREATE TABLE  Medicamento (
  Codigo integer,
  Nombre text NULL,
  Posologia text NULL,
  Igic integer NULL,
  Precio integer NULL,
  Tipo BOOLEAN NOT NULL,
  Laboratorio integer NULL REFERENCES Laboratorio(codigo) ON DELETE RESTRICT ON UPDATE CASCADE,
  PRIMARY KEY (Codigo));


-- -----------------------------------------------------
-- Table farmacia.MedicamFamilia
-- -----------------------------------------------------
CREATE TABLE  MedicamFamilia (
  CodigoMed integer NOT NULL REFERENCES Medicamento (Codigo) ON DELETE CASCADE ON UPDATE CASCADE,
  NombreFam text NOT NULL REFERENCES Familia (Nombre) ON DELETE CASCADE ON UPDATE CASCADE,
  PRIMARY KEY (CodigoMed, NombreFam));


-- -----------------------------------------------------
-- Table farmacia.Compra
-- -----------------------------------------------------
CREATE TABLE  Compra (
  FechaActual timestamp NOT NULL,
  Importe integer NULL,
  PRIMARY KEY (FechaActual));


-- -----------------------------------------------------
-- Table farmacia.MedicamCompra
-- -----------------------------------------------------
CREATE TABLE  MedicamCompra (
  CodigoMed integer NOT NULL REFERENCES Medicamento (Codigo) ON DELETE NO ACTION ON UPDATE NO ACTION,
  FechaActualCompra timestamp NOT NULL REFERENCES Compra (FechaActual) ON DELETE NO ACTION ON UPDATE NO ACTION,
  Importe float(2) NULL,
  Igic float(2) NULL,
  PRIMARY KEY (CodigoMed, FechaActualCompra));


-- -----------------------------------------------------
-- Table farmacia.ClienteCred
-- -----------------------------------------------------
CREATE TABLE  ClienteCred (
  CC text NOT NULL,
  Nombre text NULL,
  DiaPago integer NULL,
  PRIMARY KEY (CC));


-- -----------------------------------------------------
-- Table farmacia.PagoCred
-- -----------------------------------------------------
CREATE TABLE  PagoCred (
  Mes integer NOT NULL,
  Año integer NOT NULL,
  FechaActualCompra timestamp NOT NULL REFERENCES Compra (FechaActual) ON DELETE NO ACTION ON UPDATE NO ACTION,
  FechaPago timestamp NULL,
  CantidadPago float(2) NULL,
  CC text NOT NULL REFERENCES CLienteCred (CC) ON DELETE NO ACTION ON UPDATE NO ACTION,
  PRIMARY KEY (Mes, Año, FechaActualCompra, CC));
